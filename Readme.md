# 「STG68K_CNV.X」  -X68000-TOOL-  
 <img width="640" alt="title" src="doc/img/202508252143360011.png">  


## 概要  
「SHOOTING 68K」のデータを好きな画像に差し替えるツール  

## 特徴  
簡単な操作でキャラクターを差し替えることができます。ドット打ちが不要です。  

## 注意事項  
本ツールを実行する前に、大切なデータは、必ずバックアップを取って実行してね！  

## 作成の流れ  
1. 好きな画像を用意する。（256x256サイズの15色に減色したBMP/PNG画像データ） １キャラ32x32サイズで作成されていることが望ましい。  
     https://x.com/kata68k/status/1960700357547340073
1. 「png2sp68k.html」で画像データをスプライトデータ（SP/PAL）に変換する。  
     https://github.com/pirota-pirozou/PNG2SP68K  
1. 「SHOOTING 68K」の「Shooting68K_startGide.pdf」で記載されたとおりに、「SDカードへの書き出し方法」で、「BLANK1.XDF」を作成する。（X68000 Zの対象）  
1. 「SHOOTING 68K」のサンプルデータ または、「BLANK1.XDF」（X68000 Zの対象）の中に「STG68K_CNV.X」と「スプライトデータ（SP/PAL）」をコピーする。  
1. コマンドラインから下記を入力する。  
＞ STG68K_CNV.X -i ＜スプライトデータファイル名（.拡張子不要）＞ -o ＜ステージ番号＞ -m <モード番号>  
例： STG68K_CNV.X -i ROBA_F -o 1 -m 0  
スプライトデータ 「ROBA_F.sp／ROBA_F.pal」を入力データとして、  
「ステージ１」の「自機」を置き換えるモードで起動します。  
1. 「保存して終了する」を選ぶと、STAGE＜ステージ番号＞ファイルのPTN/COL/PALが変換され、上書き保存し、終了します。  
（注意：X68000Zは、更に、FDのイジェクトボタンを押してデータを更新する必要があります。）  
1. 「終了する」を選んだ場合は、保存せずに終了します。  
1. 「SHOOTING 68K」を起動して遊んでみてください。  

### <スプライトデータファイル名（.拡張子不要）>  
*  SM.Xなどで扱える形式で、.SPの画像データと、.PALのパレットデータに分かれているファイルを指す。（.拡張子不要）  

### <ステージ番号>  
*  シューティング68Kのステージ番号を指定します。（1～）  

### <モード番号>  
*  0の場合、メニューモードで起動します。（今のところ、0のみ）  

## 強制終了方法  
* ESCキーを長押し  

## 操作方法  
* ジョイスティック１  
十字ボタン  ：カーソル移動  
Aボタン     ：決定  
Bボタン     ：キャンセル or サイズ変更(画像選択時)  

* キーボード  
カーソルキー       ：カーソル移動  
SPACEキー or Zキー ：決定  
Xキー              ：キャンセル or サイズ変更(画像選択時)  

* マウス  
左クリック：決定  
右クリック：キャンセル or サイズ変更(画像選択時)  

## メニュー  
* パターン変更：置き換えたいパターンを選択します。(自機、敵、ボス、背景)  
* パレット番号：.PALで定義されたパレットデータを選択します。(0~15)  
* 画像を選ぶ：置き換えたい画像を選びます。（カーソルを動かして決定してください。）  
* 保存して終了する：保存して終了します。  
* 終了する：保存しないで終了します。（ESCキーを押して強制終了も可能です。）  

## 動作環境  
* X68000  
* メモリ2MB以上  
* FLOAT2.X　または、その互換ドライバ  
* IOCS.X　または、その互換ドライバ  

## ダウンロード  
[DownLoad](https://github.com/kata68k/X68000_Tools_STG68k_CNV/releases) 

## やることリスト  
エラー処理が未実装です。  
１ドット単位で画像を選択できるようにしようかな  
未テストの領域が多い  

## 開発環境  
X680x0 EMULATOR XM6 TypeG version 3.37  
X68000 真理子バージョン Based on GCC 1.42  
X68k High-speed Assembler v3.09+90  
HLK evolution version 3.01+17  

## 謝辞  
サンプルデータの ROBA_F.SP、ROBA_F.PAL は、電脳俱楽部134号のIKAPより  

## 履歴  
* 2025/08/25	ver.0.0.2  
** 画像選択時の範囲を32x32→32～16まで16ドット単位で可変 追加  
** 画像表示機能 削除（512x512で常時表示するように変更したため）  
** 画面モードを256x256 256色から、512x512 65536色に変更  
** パレット差し換えアルゴリズムの変更  
* 2025/08/06	ver.0.0.1  
** メニュー操作で自機データのみ置き換え可能  
** とにかくドキュメント作成が面倒。  
* 2025/05/11	ver.0.0.0  
** 開発スタート  
** 公式で展開されると思っていたが、中々出てこなかったので着手した。  
** フォーマットが気になったのも要因。  
